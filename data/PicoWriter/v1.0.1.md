# PicoWriter v1.0.1 - Changelog

Welcome to PicoWriter v1.0.1! This update introduces three major features to enhance your writing experience and simplify installation.

## New Features

### View Mode

PicoWriter now includes a dedicated **View Mode** for reading your content without accidentally editing it.

#### How to Use

- **Toggle View Mode**: Press `Ctrl+P` to switch between **VIEW MODE** and **EDIT MODE**
- **Mode Indicator**: The current mode is displayed in the bottom right corner when the sidebar is closed
- **Default Behavior**: Chapters automatically open in VIEW MODE when selected

#### View Mode Features

- **Scroll Navigation**: Use **Up/Down** arrow keys to scroll through your content
- **Read-Only**: Typing, backspace, and cursor movement are disabled to prevent accidental edits
- **No Cursor**: Cursor is hidden in view mode for a cleaner reading experience
- **Mode Toggle**: Press `Ctrl+P` again to switch back to EDIT MODE and start editing

#### Edit Mode Features

- **Full Editing**: Complete editing capabilities with cursor navigation
- **Auto-Capitalization**: Automatic capitalization for sentences and standalone "I"
- **Keyboard Shortcuts**: All shortcuts available for editing

#### When to Use

- **View Mode**: Perfect for reviewing your work, reading through chapters, or sharing your screen
- **Edit Mode**: Use when you're ready to write or make changes to your content

### Installation Script

PicoWriter now includes an installation script for easy system-wide installation on Linux systems.

#### Installation Features

- **Automatic Installation**: Simple script-based installation to `/opt/picowriter`
- **Launcher Integration**: Creates launcher script at `/root/command-launcher/picowriter.sh`
- **System-Wide Command**: Installs `picowriter` command available from anywhere
- **Clean Removal**: Includes uninstall script for complete removal

#### How to Install

1. Clone or download the PicoWriter repository
2. Navigate to the repository directory
3. Run the installation script as root:
   ```bash
   sudo ./install.sh
   ```
4. Launch PicoWriter from anywhere:
   ```bash
   picowriter
   ```

#### Installation Locations

- **Application Files**: `/opt/picowriter/`
- **Launcher Script**: `/root/command-launcher/picowriter.sh`
- **System Command**: `/usr/local/bin/picowriter`

#### Uninstallation

To remove PicoWriter from your system:
```bash
sudo ./uninstall.sh
```

### Graceful Quitting

PicoWriter now includes intelligent quit handling to prevent accidental loss of unsaved work.

#### How It Works

When you press `Ctrl+Q` to quit:

- **No Unsaved Changes**: PicoWriter quits immediately
- **Unsaved Changes**: A confirmation dialog appears asking if you want to save

#### Quit Confirmation Dialog

When quitting with unsaved changes, you'll see a "Save changes" dialog with two options:

- **Yes**: Saves your current chapter and then quits the application
- **No**: Quits without saving (your unsaved changes will be lost)

#### Safety Features

- **Prevents Data Loss**: Never accidentally lose your work when quitting
- **Quick Quit**: If you have nothing to save, quitting is instant
- **Clear Choices**: Simple Yes/No options make it easy to decide
- **Cancel Option**: Press `Esc` or `Ctrl+C` to cancel and return to editing

## Improvements

- **Better UX**: View mode provides a distraction-free reading experience
- **Data Protection**: Graceful quitting ensures you never lose unsaved work
- **Mode Clarity**: Clear visual indicators show which mode you're in
- **Easy Installation**: Simple script-based installation for system-wide deployment
- **Professional Deployment**: Proper installation locations following Linux FHS standards

## Technical Details

### View Mode Implementation

- Toggle with `Ctrl+P` (stored as `preview_mode_reading` state)
- Automatically enabled when chapters are opened
- Mode indicator shows in bottom right when sidebar is closed
- Scroll offset management for smooth page navigation

### Quit Confirmation

- Checks for unsaved changes before quitting
- Uses existing confirmation dialog system
- Properly handles save and quit sequence
- Resets unsaved changes flag after confirmation

### Installation Script

- Automated installation to `/opt/picowriter` following FHS standards
- Creates launcher scripts for command-launcher integration
- Symlinks system-wide command for easy access
- Includes verification and error handling
- Clean uninstallation script removes all components

## Migration Notes

If you're upgrading from v1.0.0:

- Your existing books and chapters will work exactly as before
- New chapters will automatically open in VIEW MODE
- Use `Ctrl+P` to switch to EDIT MODE when ready to write
- The quit confirmation will appear automatically when needed
- For system-wide installation, use the new `install.sh` script
- Manual installation (running `python3 main.py`) still works as before

## Keyboard Shortcuts Reference

**New in v1.0.1**:
- `Ctrl+P` - Toggle view/edit mode

**Updated in v1.0.1**:
- `Ctrl+Q` - Quit (now prompts to save if there are unsaved changes)

**Existing shortcuts** (unchanged):
- `Ctrl+B` - Toggle side panel
- `Ctrl+H` - Show help panel
- `Ctrl+O` - Open book selection
- `Ctrl+N` - New book/chapter
- `Ctrl+R` - Rename book/chapter
- `Ctrl+D` - Delete book/chapter
- `Ctrl+S` - Save/Reload current chapter

## Tips

1. **Review Your Work**: Use VIEW MODE to read through your chapters without accidentally editing
2. **Safe Quitting**: Always use `Ctrl+Q` to quit - it will remind you to save if needed
3. **Mode Switching**: Get comfortable toggling between VIEW and EDIT modes with `Ctrl+P`
4. **Default Behavior**: Remember that chapters open in VIEW MODE by default - press `Ctrl+P` to edit

---

**Version**: v1.0.1  
**Release Date**: [Current]  
**Compatibility**: Fully compatible with v1.0.0 data

For the complete user manual, see the v1.0.0 chapter.
